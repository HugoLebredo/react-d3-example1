{"version":3,"sources":["data/config.js","services/fitExpenses.js","services/transformTest.js","services/parseDaysOfWeek.js","components/Expenses.js","components/Categories.js","services/parseExpenses.js","App.js","serviceWorker.js","index.js"],"names":["margin","daysOfTheWeek","fitExpenses","d3","domain","range","data","weeksExtent","Object","keys","d","Date","yScale","weeks","offset","map","week","x","y","xScale","selectedWeekRadius","trasformTest","expenses","selectedWeek","_","chain","key","focusX","WeekDay","focusY","getTime","perAngle","Math","PI","angle","cos","sin","assign","flatten","value","parseDaysOfWeek","daysOfWeek","date","dayOfweek","name","cx","cy","colorScale","chroma","scale","amountScale","simulation","alphaDecay","velocityDecay","force","stop","drag","Expenses","props","state","forceTick","bind","dragStart","dragExpense","dragEnd","on","this","container","refs","calculateData","renderDayCircles","renderWeeks","renderCircles","nodes","alpha","restart","transformTest","daysofweek","expensesExtent","Amount","circles","selectAll","exit","remove","enter","append","classed","merge","attr","call","days","daysRadius","text","weekFormat","event","active","alphaTarget","subject","fx","fy","dragged","expenseX","expenseY","expense","each","categories","category","radius","linkToCategory","ref","Component","radiusScale","App","categoryContainer","renderLinks","radiusExtent","total","width","lines","links","insert","select","source","target","parseExpenses","filter","Description","getDay","groupBy","floor","prevWeek","nextWeek","expensesData","setState","push","sumBy","forceUpdate","formatweek","style","cursor","onClick","height","Categories","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.f0cd1a7c.chunk.js","sourcesContent":["export var width = 900;\nexport var height = 550;\nexport var margin = {top:40, right:20, bottom:20, left:40};\nexport var radius = 10;\nexport var daysOfTheWeek = [[0,'S'],[1,'M'],[2,'T'],[3,'W'],[4,'Th'],[5,'F'],[6,'Sa']]","import _, { flatten, keyBy } from 'lodash';\nimport * as d3 from 'd3';\n\nimport {width,height, margin} from '../data/config';\n\nconst xScale = d3.scaleBand().domain([0,1,2,3,4,5,6])\n                            .range([margin.left, width - margin.right]);\n\nconst fitExpenses =  (data) => {\n\n    var weeksExtent = d3.extent(Object.keys(data), d => new Date(d))\n\n    const yScale = d3.scaleLinear().domain(weeksExtent)\n                                    .range([height-margin.bottom, margin.top]);\n\n    var weeks = d3.timeWeek.range(weeksExtent[0],\n                                d3.timeWeek.offset(weeksExtent[1],1))\n    \n    weeks = weeks.map(week => {\n        return{\n            week,\n            x: margin.left,\n            y: yScale(week) + height\n        }\n    })\n\n   return(weeks);\n\n}\n\nexport default fitExpenses;","import _, { flatten, keyBy } from 'lodash';\nimport * as d3 from 'd3';\n\nimport { width, height, margin } from '../data/config';\n\nconst xScale = d3.scaleLinear().domain([0, 6])\n                             .range([margin.left, width - margin.right]);\n\nvar selectedWeekRadius = (width - margin.left - margin.right) / 2;\n\nconst trasformTest = (data) => {\n    \n    const {expenses,selectedWeek }= data;\n\n    var weeksExtent = d3.extent(Object.keys(expenses),d => new Date(d))\n    \n    const yScale = d3.scaleLinear().domain(weeksExtent)\n                                    .range([height - margin.bottom, margin.top]);\n\n    return (_.chain(expenses)\n        .map((week,key) => {\n            key = new Date(key)\n            return _.map(week,d => {\n                var focusX = xScale(d.WeekDay);\n                var focusY = yScale(new Date(key)) + height;\n                if (key.getTime() === selectedWeek.getTime()) {\n                    var perAngle = Math.PI/6;\n                    var angle = Math.PI - perAngle * d.WeekDay;\n                    focusX = selectedWeekRadius * Math.cos(angle) + selectedWeekRadius + margin.left\n                    focusY = selectedWeekRadius * Math.sin(angle) + margin.top\n            }\n                return Object.assign(d ,{\n                    focusX,\n                    focusY,\n                })\n            })\n        }).flatten().value()\n    )\n}\n    \nexport default trasformTest","import _ from 'lodash';\n\nimport {width, margin} from '../data/config';\n\nvar selectedWeekRadius = (width - margin.left - margin.right) / 2;\n\nvar perAngle = Math.PI/6;\n\nconst parseDaysOfWeek = (daysOfWeek) => {\n\n    const daysParsed = _.map(daysOfWeek, date => {\n                            var [dayOfweek, name] = date;\n                            var angle = Math.PI - perAngle * dayOfweek;\n                            var cx =  selectedWeekRadius * Math.cos(angle) + selectedWeekRadius + margin.left;\n                            var cy =  selectedWeekRadius * Math.sin(angle) + margin.top;\n                            return{\n                                name, cx, cy\n                            }\n    })\n\n    return(daysParsed);\n}\n\nexport default parseDaysOfWeek;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport chroma from 'chroma-js';\nimport _ from 'lodash';\n\nimport fitExpenses from '../services/fitExpenses';\nimport transformTest from '../services/transformTest';\nimport parseDaysOfWeek from '../services/parseDaysOfWeek';\n\nimport {width, height, margin, radius, daysOfTheWeek} from '../data/config';\n\n//d3 functions\nconst colorScale = chroma.scale(['#42e9f5', 'lightblue', '#ff69b6']);\nconst amountScale = d3.scaleLog();\n\nvar simulation = d3.forceSimulation()\n    .alphaDecay(0.001)\n    .velocityDecay(0.3)\n    //.force('center',d3.forceCenter(width/2,height/2))\n    //.force('charge',d3.forceManyBody(100))\n    .force('collide', d3.forceCollide(radius))\n    .force('x',d3.forceX(d => d.focusX))\n    .force('y',d3.forceY(d => d.focusY))\n    .stop();\n\nvar drag = d3.drag();\n\nclass Expenses extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {selectedWeek: null};\n        this.forceTick = this.forceTick.bind(this);\n\n        this.dragStart = this.dragStart.bind(this);\n        this.dragExpense = this.dragExpense.bind(this);\n        this.dragEnd = this.dragEnd.bind(this);\n\n        simulation.on('tick',this.forceTick);\n    }\n\n    componentDidMount(){\n        this.container = d3.select(this.refs.container);\n        this.calculateData();\n        this.renderDayCircles();\n        this.renderWeeks();\n        this.renderCircles();\n        simulation.nodes(this.expenses).alpha(0.9).restart();\n\n        //This other examples drag is used in componentWillmount\n        drag.on('start',this.dragStart)\n        .on('drag',this.dragExpense)\n        .on('end',this.dragEnd);\n    }\n\n    componentDidUpdate(){\n        //Needed for the transition when we do click iver the arrows\n        this.calculateData();\n        this.renderCircles();\n\n        simulation.nodes(this.expenses).alpha(0.9).restart();\n    }\n\n\n    calculateData(){\n        this.expenses = transformTest(this.props);\n        this.weeks = fitExpenses(this.props.expenses);\n        this.daysofweek = parseDaysOfWeek(daysOfTheWeek);\n        var expensesExtent = d3.extent(this.expenses, d => d.Amount);\n        amountScale.domain(expensesExtent);\n    }\n\n    renderCircles(){\n        //draw expenses circles\n        this.circles = this.container.selectAll('.expenses')\n            .data(this.expenses,d => d.name);\n\n        //exit\n        this.circles.exit().remove();\n\n        //enter + update\n        this.circles = this.circles.enter().append('circle')\n                        .classed('expenses',true)\n                        .merge(this.circles)\n                        .attr('r',d => radius)\n                        .attr('fill-opacity',0.25)\n                        .attr('stroke-width', 3)\n                        .call(drag)\n                        .merge(this.circles)\n                        .attr('fill', d => colorScale(amountScale(d.Amount)))\n                        .attr('stroke', d => colorScale(amountScale(d.Amount)));              \n    }\n\n    renderDayCircles(){\n        var days = this.container.selectAll('.days')\n                        .data(this.daysofweek, d => d.name)\n                        .enter().append('g')\n                        .classed('days',true)\n                        .attr('transform', d => 'translate('+[d.cx,d.cy]+')');\n\n        var daysRadius = 60;\n        var fontSize = 15;\n\n        days.append('circle')\n            .attr('r',d => daysRadius)\n            .attr('opacity',0.25)\n            .attr('fill','#97FFD1');\n\n        days.append('text')\n            .attr('y',daysRadius + fontSize)\n            .attr('text-anchor','middle')\n            .attr('dy','.35em')\n            .attr('fill','#06DD88')\n            .attr('font-weight',600)\n            .text(d => d.name);\n\n    }\n\n    renderWeeks(){\n        var weeks = this.container.selectAll('.weeks')\n                .data(this.weeks, d => d.name)\n                .enter().append('g')\n                .classed('week',true)\n                .attr('transform', d => 'translate('+[d.x,d.y]+')');\n        \n        var regHeight = 10\n\n        weeks.append('rect')\n            .attr('width', width - margin.left - margin.right)\n            .attr('height', regHeight)\n            .attr('fill', 'pink')\n            .attr('opacity',0.25);\n        \n        var weekFormat = d3.timeFormat('%m/%d')\n\n        weeks.append('text')\n            .attr('text-anchor','end')\n            .attr('dy','.35em')\n            .text(d => weekFormat(d.week));\n\n    }\n  \n    forceTick() {\n        this.circles.attr('cx', d => d.x)\n                    .attr('cy', d => d.y)\n    }\n    \n    dragStart(event) {\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        event.subject.fx = event.subject.x;\n        event.subject.fy = event.subject.y;\n    }\n  \n    dragExpense(event) {\n        this.dragged = null;\n\n        event.subject.fx = event.x;\n        event.subject.fy = event.y;\n\n        var expenseX = event.x;\n        var expenseY = event.y;\n        var expense = event.subject;\n       \n        //checking if the position of the expense is into some category area\n        // If is true the expense and category are assigned to the global variable \"dragged\"\n        //it isnt required div the radius. Its a way to drag the expense to the center \n        //of the category center for doing the append\n        _.each(this.props.categories, category => {\n            var {x, y, radius} = category\n            if(x - radius/2 < expenseX && x + radius/2 > expenseX &&\n                y - radius/2 < expenseY && y + radius/2 > expenseY) {\n                    this.dragged = {expense, category};\n                }\n            }\n         )\n    }\n    \n    dragEnd(event) {\n        \n        if (!event.active) simulation.alphaTarget(0);\n        event.subject.fx = null;\n        event.subject.fy = null;\n\n        //The value of \"dragged\" is sent only when the drag ends\n        if (this.dragged){\n            var {expense, category} = this.dragged;     \n            this.props.linkToCategory(expense, category);\n        }\n        this.dragged = null;\n    }\n\n    render(){\n        return (\n \n                <g ref=\"container\"></g>\n\n        )\n    }\n}\n\nexport default Expenses;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport {width, height } from '../data/config';\n\nvar radiusScale = d3.scaleLinear().range([15,50]);\nvar simulation = d3.forceSimulation()\n    .alphaDecay(0.001)\n    .velocityDecay(0.3)\n    .force('collide', d3.forceCollide(d => d.radius +5))\n    .force('x',d3.forceX(d => d.focusX))\n    .force('y',d3.forceY(d => d.focusY))\n    .stop();\n\nclass App extends Component {\n    constructor(props){\n        super(props);\n        this.state = {};\n\n        this.forceTick = this.forceTick.bind(this);\n        simulation.on('tick',this.forceTick);\n\n    }\n\n    componentDidMount(){\n        //this.container = d3.select(this.useRef.contenedor);\n        this.container = d3.select(this.refs.categoryContainer);\n        this.calculateData();\n        this.renderLinks();\n        this.renderCircles();\n\n        //start simulation every time this event will be called\n        simulation.nodes(this.props.categories).alpha(0.9).restart();\n    }\n\n    componentDidUpdate(){\n        this.calculateData();\n        this.renderLinks();\n        this.renderCircles();\n    }\n\n    calculateData(){\n        var radiusExtent = d3.extent(this.props.categories, category => category.total);\n        radiusScale.domain(radiusExtent);\n    \n        this.categories = _.map(this.props.categories, category => {\n            return Object.assign(category,{\n                focusX:width /2,\n                focusY: height / 3,\n                radius:radiusScale(category.total)\n            })\n        })\n    }\n\n    renderLinks(){\n        this.lines = this.container.selectAll('line')\n            .data(this.props.links)\n        \n        //exit\n        this.lines.exit().remove();\n\n        //enter\n        this.lines = this.lines.enter().insert('line','g')\n            .merge(this.lines)\n            .attr('stroke','#666');\n    }\n\n    renderCircles(){\n        //update\n        this.circles = this.container.selectAll('g')\n            .data(this.categories);\n        \n        //exit\n        this.circles.exit().remove();\n        \n        //enter\n        var enter = this.circles.enter().append('g');\n        enter.append('circle')\n            .attr('fill','#fff')\n            .attr('stroke','#666')\n            .attr('stroke-width',2)\n        \n        enter.append('text')\n            .attr('text-anchor','middle')\n            .attr('dy','.35em');\n        \n        //enter + update selection\n        this.circles = enter.merge(this.circles);\n        this.circles .select('circle')\n            .attr('r', d => d.radius)\n        this.circles.select('text')\n            .text(d => d.name) \n    }\n\n    forceTick(){\n        this.circles.attr('transform', d => 'translate('+[d.x,d.y]+')');\n        this.lines.attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n    }\n\n    render() {\n        return (\n            <g ref=\"categoryContainer\"/>\n        );\n    }\n}\n\nexport default App;","import _ from 'lodash';\nimport * as d3 from 'd3';\n\nconst parseExpenses = data => (\n    _.chain(data)\n\n    .filter(d => d.Amount < 0)\n    .map(d => {\n        const { Description } = d;\n        const date = new Date(d['Trans Date'])\n            return{\n                Description,\n                Amount: d.Amount < 0 ? -d.Amount : d.Amount,\n                date,\n                WeekDay: date.getDay() \n                }\n        }\n    ).groupBy(d => d3.timeWeek.floor(d.date)).value()\n\n)\n  \nexport default parseExpenses;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport Expenses from './components/Expenses';\nimport Categories from './components/Categories';\nimport parseExpenses from './services/parseExpenses';\nimport expensesData from './data/expenses';\n\nimport {width, height} from './data/config';\n\nimport './App.css';\n\nclass App extends Component {\n  constructor(props){\n    \n    super(props);\n\n    this.state = {\n      expenses: [],\n      categories:[{name:'Parking',expenses:[],total:0},\n                  {name:'Restaurants',expenses:[],total:0}\n                ],\n      selectedWeek: null,\n    };\n\n    this.prevWeek = this.prevWeek.bind(this);\n    this.nextWeek = this.nextWeek.bind(this);\n    this.linkToCategory = this.linkToCategory.bind(this);\n  }\n\n\n  componentWillMount(){\n    var expenses = parseExpenses(expensesData);\n\n    var selectedWeek = d3.max(Object.keys(expenses),d => new Date(d));\n    this.setState({expenses, selectedWeek});\n  }\n\n  prevWeek(){\n    var selectedWeek = d3.timeWeek.offset(this.state.selectedWeek,-1);\n    this.setState({selectedWeek});\n      }\n\n  nextWeek(){\n    var selectedWeek = d3.timeWeek.offset(this.state.selectedWeek,1);\n    this.setState({selectedWeek});\n  }\n\n  linkToCategory(expense, category){\n    category.expenses.push(expense)\n    category.total = _.sumBy(category.expenses,'Amount');\n\n    this.forceUpdate();\n  }\n    //add a link between the category and the expense\n\n  render(){\n    var formatweek = d3.timeFormat('%d %B %Y')(this.state.selectedWeek)\n    var links = []\n\n    _.each(this.state.categories, category => {\n      _.each(category.expenses, expense => {\n          if (d3.timeWeek.floor(expense.date).getTime() === this.state.selectedWeek.getTime()){\n            links.push({\n              source: expense,\n              target: category\n            })\n          }\n      })\n    })\n\n    var props = {\n        linkToCategory: this.linkToCategory,\n        links: links\n      }\n\n    \n    return(\n      <div>\n        <h2>\n          <span style={{cursor: 'pointer'}} onClick = {this.prevWeek}>←</span>\n          {formatweek}\n          <span style={{cursor: 'pointer'}}  onClick = {this.nextWeek}>→</span>\n        </h2>\n        <svg width={width} height={height * 2}>\n          <Expenses {...props} {...this.state}/>\n          <Categories {...props} {...this.state}/>\n        </svg>\n       \n      </div>\n      )\n    };\n  }\n\n  export default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}