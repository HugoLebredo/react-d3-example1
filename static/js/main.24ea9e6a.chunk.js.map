{"version":3,"sources":["data/config.js","services/fitExpenses.js","services/transformTest.js","components/Expenses.js","services/daysToCalendar.js","services/dailyAmountToCal.js","components/Day.js","components/Categories.js","services/parseExpenses.js","App.js","serviceWorker.js","index.js"],"names":["margin","colors","daysOfTheWeek","fitExpenses","d3","domain","range","data","weeksExtent","Object","keys","d","Date","yScale","weeks","offset","map","week","x","y","xScale","radiusScale","trasformTest","expenses","selectedWeek","flatExpenses","_","chain","flatten","value","expensesExtent","Amount","key","WeekDay","date","getDay","focusX","focusY","getTime","height","Math","abs","assign","radius","amountScale","simulation","alphaDecay","velocityDecay","force","stop","drag","Expenses","props","state","forceTick","bind","dragStart","dragExpense","dragEnd","mouseOver","on","this","container","refs","append","tooltip","attr","fontSize","style","calculateData","renderCircles","nodes","alpha","restart","selectedWeekRadius","perAngle","PI","days","dayOfweek","name","angle","cx","cos","cy","sin","transformTest","circles","selectAll","Description","exit","remove","enter","classed","call","i","merge","categories","text","weekFormat","event","dragged","active","alphaTarget","subject","fx","fy","expenseX","expenseY","expense","each","category","type","day","linkToCategory","editDate","select","split","capitalize","join","width","node","getBoundingClientRect","ref","Component","daysToCalendar","daysExtent","backDays","weekExtent","test","floor","push","formatTime","AmountScale","colorScale","chroma","scale","dailyAmountToCal","AmountExtent","values","dayText","fill","Day","renderBacks","renderDays","totalsByDay","groupBy","reduce","obj","sumBy","rects","insert","dayWidth","dayHeight","t","duration","dayAmount","transition","delay","shouldSelectedWeekCurve","dayOfWeek","App","renderLinks","total","fill2","lines","links","atan2","target","source","direction","dist","sqrt","pow","parseExpenses","filter","daysOfWeek","prevWeek","nextWeek","expensesData","setState","console","log","forceUpdate","includes","without","formatweek","className","textAlign","cursor","onClick","Categories","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.24ea9e6a.chunk.js","sourcesContent":["export var width = 800;\nexport var height = 550;\nexport var margin = {top:40, right:40, bottom:20, left:40};\n\nexport var radius = 10;\n\nexport var dayWidth = 50;\nexport var dayHeight = 80;\nexport var topPadding = 150;\nexport var fontSize = 20;\nexport var colors = {\n    white: '#fff8fa',\n    gray: '#e1ecea',\n    black: '#516561',\n  };\nexport var daysOfTheWeek = [[0,'S'],[1,'M'],[2,'T'],[3,'W'],[4,'Th'],[5,'F'],[6,'Sa']]","import _, { flatten, keyBy } from 'lodash';\nimport * as d3 from 'd3';\n\nimport {width,height, margin} from '../data/config';\n\nconst xScale = d3.scaleBand().domain([0,1,2,3,4,5,6])\n                            .range([margin.left, width - margin.right]);\n\nconst fitExpenses =  (data) => {\n\n    var weeksExtent = d3.extent(Object.keys(data), d => new Date(d))\n\n    const yScale = d3.scaleLinear().domain(weeksExtent)\n                                    .range([height-margin.bottom, margin.top]);\n\n    var weeks = d3.timeWeek.range(weeksExtent[0],\n                                d3.timeWeek.offset(weeksExtent[1],1))\n    \n    weeks = weeks.map(week => {\n        return{\n            week,\n            x: margin.left,\n            y: yScale(week) + height\n        }\n    })\n\n   return(weeks);\n\n}\n\nexport default fitExpenses;","import _, { flatten, keyBy } from 'lodash';\nimport * as d3 from 'd3';\n\nimport { width, height, margin , radius} from '../data/config';\n\nvar dayHeight = 75;\n\nconst xScale = d3.scaleLinear().domain([0, 6])\n                             .range([margin.left, width - margin.right]);\n\nvar radiusScale = d3.scaleLinear().range([radius, 2 * radius]);\n\nconst trasformTest = (data) => {\n    \n    const {expenses,selectedWeek }= data;\n\n    const flatExpenses = _.chain(expenses).map(d => d).flatten().value()\n\n    const expensesExtent = d3.extent(flatExpenses, d => d.Amount)\n    \n    radiusScale.domain(expensesExtent);\n\n    var weeksExtent = d3.extent(Object.keys(expenses),d => new Date(d))\n    \n    const yScale = d3.scaleLinear().domain(weeksExtent)\n                                    .range([height - margin.bottom, margin.top]);\n\n    return (_.chain(expenses)\n        .map((week,key) => {\n            key = new Date(key);\n            return _.map(week,d => {\n                var WeekDay = d.date.getDay();\n                var focusX = xScale(WeekDay);\n                var focusY = yScale(new Date(key)) + height;\n                if (key.getTime() === selectedWeek.getTime()) {\n                   var offset = Math.abs(3 - WeekDay);\n                   focusY = height - 2 * dayHeight - 0.5 * offset * dayHeight;\n\n            }\n                return Object.assign(d ,{\n                    WeekDay,\n                    radius: radiusScale(d.Amount),\n                    focusX,\n                    focusY:focusY + 125,\n                })\n            })\n        }).flatten().value()\n    )\n}\n    \nexport default trasformTest","import React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nimport _ from 'lodash';\n\nimport fitExpenses from '../services/fitExpenses';\nimport transformTest from '../services/transformTest';\n\nimport {width, height, margin, radius, daysOfTheWeek, colors} from '../data/config';\n\nvar dayWidth = 50;\nvar dayHeight = 80;\n\nvar fontSize = 15;\n\n\n//d3 functions\nconst amountScale = d3.scaleLog();\n\nvar simulation = d3.forceSimulation()\n    .alphaDecay(0.001)\n    .velocityDecay(0.3)\n    //.force('center',d3.forceCenter(width/2,height/2))\n    //.force('charge',d3.forceManyBody(100))\n    .force('collide', d3.forceCollide(radius + 5))\n    .force('x',d3.forceX(d => d.focusX))\n    .force('y',d3.forceY(d => d.focusY))\n    .stop();\n\nvar drag = d3.drag();\n\nclass Expenses extends Component {\n\n    constructor(props){\n        super(props);\n        this.state = {selectedWeek: null};\n\n        this.forceTick = this.forceTick.bind(this);\n\n        this.dragStart = this.dragStart.bind(this);\n        this.dragExpense = this.dragExpense.bind(this);\n        this.dragEnd = this.dragEnd.bind(this);\n        this.mouseOver = this.mouseOver.bind(this);\n        \n        simulation.on('tick',this.forceTick);\n    }\n\n    componentDidMount(){\n        this.container = d3.select(this.refs.container).append('g');\n        //crate tooltip shape\n        this.tooltip = d3.select(this.refs.container).append('g');\n        this.tooltip.append('rect')\n          .attr('height', fontSize + 4)\n          .attr('y', -fontSize / 2 - 2)\n          .attr('opacity', 0.85)\n          .attr('fill', colors.white);\n\n        this.tooltip.append('text')\n          .attr('text-anchor', 'middle')\n          .attr('dy', '.35em')\n          .attr('fill', colors.black)\n          .style('font-size', fontSize)\n          .style('pointer-events', 'none');\n\n        this.calculateData();\n        //this.renderDayCircles();\n        //this.renderWeeks();\n        this.renderCircles();\n        simulation.nodes(this.expenses).alpha(0.9).restart();\n\n        //This other examples drag is used in componentWillmount\n        drag.on('start',this.dragStart)\n            .on('drag',this.dragExpense)\n            .on('end',this.dragEnd);\n    }\n\n    componentDidUpdate(){\n        //Needed for the transition when we do click iver the arrows\n        this.calculateData();\n        this.renderCircles();\n\n        simulation.nodes(this.expenses).alpha(0.9).restart();\n    }\n\n\n    calculateData(){\n\n        //render week days of top\n        var selectedWeekRadius = (width - margin.left - margin.right) / 2;\n        var perAngle = Math.PI/6;  \n        \n        this.days  = _.map(daysOfTheWeek, date => {\n            var [dayOfweek, name] = date;\n            var angle = Math.PI - perAngle * dayOfweek;\n            var cx =  selectedWeekRadius * Math.cos(angle) + selectedWeekRadius + margin.left;\n            var cy =  selectedWeekRadius * Math.sin(angle) + margin.top;\n            return { \n                date:  d3.timeDay.offset(this.props.selectedWeek,dayOfweek),\n                name, cx, cy,  radius: 60\n            }\n        })\n\n        this.expenses = transformTest(this.props);\n        this.weeks = fitExpenses(this.props.expenses);\n        \n        var expensesExtent = d3.extent(this.expenses, d => d.Amount);\n        amountScale.domain(expensesExtent);\n    }\n\n    renderCircles(){\n        //draw expenses circles\n        this.circles = this.container.selectAll('.expense')\n            .data(this.expenses, d => d.Description);\n        //exit\n        this.circles.exit().remove();\n\n        //enter + update\n        this.circles = this.circles.enter().append('circle')\n                        .classed('expense',true)\n                        .attr('fill', colors.white)\n                        .style('cursor', 'grab')\n                        .attr('fill-opacity',1)\n                        .attr('stroke-width', 2)\n                        .call(drag)\n                        .on('mouseover', (d,i) => this.mouseOver(d,i))\n                        //.on('mouseover',d => mostrarPlayBox(\"evento\",d, this.div))\n                        .on('mouseleave', () => this.tooltip.style('display', 'none'))\n                        .merge(this.circles)\n                        .attr('r',d => d.radius)\n                        .attr('stroke', d => d.categories ? colors.black : '');              \n    }\n\n    //Depreciated\n    renderDayCircles(){\n        var days = this.container.selectAll('.days')\n                        .data(this.days, d => d.name)\n                        .enter().append('g')\n                        .classed('days',true)\n                        .attr('transform', d => 'translate('+[d.cx,d.cy]+')');\n\n        var fontSize = 15;\n\n        days.append('circle')\n            .attr('r',d => d.radius)\n            .attr('opacity',0.25)\n            .attr('fill','#97FFD1');\n\n        days.append('text')\n            .attr('y',d => d.radius + fontSize)\n            .attr('text-anchor','middle')\n            .attr('dy','.35em')\n            .attr('fill','#06DD88')\n            .attr('font-weight',600)\n            .text(d => d.name);\n    }\n\n    //Depreciated\n    renderWeeks(){\n        var weeks = this.container.selectAll('.weeks')\n                .data(this.weeks, d => d.name)\n                .enter().append('g')\n                .classed('week',true)\n                .attr('transform', d => 'translate('+[d.x,d.y]+')');\n        \n        var regHeight = 10\n\n        weeks.append('rect')\n            .attr('width', width - margin.left - margin.right)\n            .attr('height', regHeight)\n            .attr('fill', 'pink')\n            .attr('opacity',0.25);\n        \n        var weekFormat = d3.timeFormat('%m/%d')\n\n        weeks.append('text')\n            .attr('text-anchor','end')\n            .attr('dy','.35em')\n            .text(d => weekFormat(d.week));\n\n    }\n  \n    forceTick() {\n        this.circles.attr('cx', d => d.x)\n                    .attr('cy', d => d.y)\n    }\n    \n    dragStart(event) {\n        this.dragged = true;\n        this.tooltip.style('display', 'none');\n\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        event.subject.fx = event.subject.x;\n        event.subject.fy = event.subject.y;\n    }\n  \n    dragExpense(event) {\n        this.dragged = null;\n\n        event.subject.fx = event.x;\n        event.subject.fy = event.y;\n\n        var expenseX = event.x;\n        var expenseY = event.y;\n        var expense = event.subject;\n       \n        //checking if the position of the expense is into some category area\n        // If is true the expense and category are assigned to the global variable \"dragged\"\n        //it isnt required div the radius. Its a way to drag the expense to the center \n        //of the category center for doing the append\n        _.each(this.props.categories, category => {\n            var {x, y, radius} = category\n            if(x - radius < expenseX && x + radius > expenseX &&\n                y - radius < expenseY && y + radius > expenseY) {\n                    this.dragged = {expense, category, type: 'category'};\n                }\n            }\n         );\n \n        // calculate if the expense is being overlap another dayweek\n        _.each(this.days, day => {\n            var {cx, cy} = day\n            if(cx - dayWidth < expenseX  &&  expenseX < cx + dayWidth  &&\n                cy - dayHeight< expenseY && expenseY < cy + dayHeight ) {\n                this.dragged = {expense, day, type: 'day'};\n                }\n            } \n         );\n    }\n    \n    dragEnd(event) {\n        \n        if (!event.active) simulation.alphaTarget(0);\n        event.subject.fx = null;\n        event.subject.fy = null;\n\n        //The value of \"dragged\" is sent only when the drag ends\n        if (this.dragged && this.dragged.type == 'category'){\n            var {expense, category} = this.dragged;     \n            this.props.linkToCategory(expense, category);\n        } else if (this.dragged && this.dragged.type == 'day'){\n            var {expense, day} = this.dragged;\n            this.props.editDate(expense, day);\n        }\n    \n        this.dragged = null;\n    }\n\n///////////////\nmouseOver(event,data) {\n    if (this.dragged) return;\n    this.tooltip.style('display', 'block');\n    \n    var {x, y, Description} = data;\n    x = x < 80 ? 80 : x;\n    this.tooltip.attr('transform', 'translate(' + [x, y + data.radius + fontSize] + ')');\n    this.tooltip.select('text')\n      .text(_.map(Description.split(' '), _.capitalize).join(' '));\n    var width = this.tooltip.select('text').node().getBoundingClientRect().width;\n    this.tooltip.select('rect')\n      .attr('width', width + 6)\n      .attr('x', - width / 2 - 3);\n  }\n\n//////////////\n    render(){\n        return (\n                <g ref=\"container\"/>\n        )\n    }\n}\n\nexport default Expenses;","import _ from 'lodash';\nimport * as d3 from 'd3';\n\nimport { width, height, margin } from '../data/config';\n\nvar dayHeight = 75;\n\nconst xScale = d3.scaleLinear().domain([0, 6])\n                             .range([margin.left, width - margin.right]);\n\nconst daysToCalendar = data => {\n    \n    const {expenses,selectedWeek } = data;\n\n    var days = (_.chain(expenses)\n                .map( node =>  node ).flatten().value());\n    \n    var daysExtent = d3.extent(days, d => new Date(d.date));\n\n    var backDays = d3.timeDay.range(daysExtent[0],\n                                    d3.timeDay.offset(daysExtent[1],1));\n    \n    var weekExtent = d3.extent(backDays, d => d3.timeWeek(d));\n                    \n    var yScale = d3.scaleLinear().domain(weekExtent)\n                    .range([height - margin.bottom, margin.top]);\n\n    var test = (_.chain(backDays)\n                    .map( day => {\n                        var week = d3.timeWeek.floor(day);\n                        var WeekDay = day.getDay();\n                        var focusX = xScale(WeekDay);\n                        var focusY = yScale(week) + height  + 150;\n                        return ({\n                            focusX,\n                            focusY\n                        })\n                    }).value()\n                )\n              \n    for (var i = 0; i < 7; i++){\n        var offset = Math.abs(3 - i);\n        var focusX = xScale(i);\n        var focusY = height - 2 * dayHeight - 0.5 * offset * dayHeight + 150;\n        test.push({focusX,focusY})\n    }\n  \n    return test\n}\n    \nexport default daysToCalendar;","import _ from 'lodash';\nimport * as d3 from 'd3';\nimport chroma from 'chroma-js';\n\nimport { width, height, margin } from '../data/config';\n\nvar dayHeight = 75;\n\nvar formatTime = d3.timeFormat(\"%d/%m\");\n\nvar AmountScale = d3.scaleLog();\nvar colorScale = chroma.scale(['#53c3ac', '#f7e883', '#e85178']);\n\nconst xScale = d3.scaleLinear().domain([0, 6])\n                             .range([margin.left, width - margin.right]);\n\nconst dailyAmountToCal = (Amount,selectedWeek) => {\n\n    var AmountExtent = d3.extent(_.values(Amount));\n\n    AmountScale.domain(AmountExtent);\n\n    var weeksExtent = d3.extent(Object.keys(Amount),d => {\n                d = new Date(d);\n                return d3.timeWeek.floor((d))\n            })\n    \n    const yScale = d3.scaleLinear().domain(weeksExtent)\n                                    .range([height - margin.bottom, margin.top]);\n\n    var resultado =  (_.chain(Amount)\n        .map((Amount,day) => {\n                day = new Date(day)\n                var WeekDay = day.getDay();\n                var week = d3.timeWeek.floor(day);\n                var focusX = xScale(WeekDay);\n                var focusY = yScale(week) + height;\n                if (week.getTime() === selectedWeek.getTime()) {\n                    var offset = Math.abs(3 - WeekDay);\n                    focusY = height - 2 * dayHeight - 0.5 * offset * dayHeight;\n                 }\n                return {\n                    dayText: formatTime(day),\n                    Amount,\n                    WeekDay,\n                    focusX,\n                    focusY:focusY + 150,\n                    fill: colorScale(AmountScale(Amount))\n                }\n            }).value()\n    )\n\n    return resultado\n}\n    \nexport default dailyAmountToCal;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport transformTest from '../services/transformTest';\nimport daysToCalendar from '../services/daysToCalendar';\nimport dailyAmountToCal from '../services/dailyAmountToCal';\n\nimport {width, height, margin, colors} from '../data/config';\n\nvar dayWidth = 50;\nvar dayHeight = 80;\nvar topPadding = 150;\nvar fontSize = 20;\n\nvar xScale = d3.scaleLinear().domain([0, 6])\n                             .range([margin.left, width - margin.right]);\nvar yScale = d3.scaleLinear().range([height - margin.bottom, margin.top]);\n\nclass Day extends Component {\n    constructor(props){\n        super(props);\n        this.state = {};\n    }\n\n    componentDidMount(){\n        this.container = d3.select(this.refs.container);\n        this.calculateData();\n        this.renderBacks();\n        this.renderDays();\n    }\n\n    componentDidUpdate(){\n        this.calculateData();\n        this.renderDays();\n    }\n\n    calculateData(){\n        this.expenses = transformTest(this.props);\n \n        this.days = daysToCalendar(this.props)\n\n        var weeksExtent = d3.extent(this.expenses, d => d3.timeWeek.floor(d.date))\n        \n        yScale.domain(weeksExtent);\n \n        this.totalsByDay = _.chain(this.expenses)\n            .groupBy(d => d3.timeDay.floor(d.date))\n                .reduce((obj, expenses, date) => {\n                     obj[date] = _.sumBy(expenses, 'Amount');\n                    return obj;\n                }, {}).value();\n\n\n        this.totalsByDay = dailyAmountToCal(this.totalsByDay,this.props.selectedWeek);\n        \n    }\n\n    renderBacks() {\n        this.rects = this.container.selectAll('.back')\n                .data(this.days)\n    \n        //exit\n        this.rects.exit().remove();\n\n        //enter\n        this.rects = this.rects.enter().insert('rect', '.day')\n            .attr('x',-dayWidth)\n            .attr('y',-dayHeight)\n            .attr('width',dayWidth * 2)\n            .attr('height',dayHeight * 1.5)\n            .attr('transform', d => 'translate(' + [d.focusX, d.focusY] + ')')\n            .attr('fill', colors.gray);\n    }\n\n    renderDays() {\n        var t = d3.transition().duration(500);\n\n        this.dayAmount = this.container.selectAll('.day')\n            .data(this.totalsByDay,d => d.fill);\n\n        //exit\n        this.dayAmount.exit().remove();\n\n        //enter\n        var enter = this.dayAmount.enter().append('g')\n                    .classed('day', true)\n                    .attr('transform', d => 'translate(' + [d.focusX, d.focusY] + ')');\n\n        enter.append('rect')\n            .attr('x',-dayWidth)\n            .attr('y',-dayHeight)\n            .attr('width',dayWidth * 2)\n            .attr('height',dayHeight * 1.5)\n            .attr('fill', d => d.fill);\n        \n        enter.append('text')\n            .attr('text-anchor','middle')\n            .attr('dy','.35em')\n            .attr('fill',colors.white)\n            .style('font-family', 'CatMule Caps')\n            .style('font-size', fontSize)\n            .text(d => d.dayText)\n            .attr('y', d => fontSize);\n\n        this.dayAmount = enter.merge(this.dayAmount);\n        \n        this.dayAmount.transition(t)\n            .delay((d, i) => d.WeekDay * 50)\n            .attr('transform', d => 'translate(' + [d.focusX, d.focusY] + ')');\n              \n    }\n\n    calculateDayPosition(date, shouldSelectedWeekCurve) {\n        var dayOfWeek = date.getDay();\n        var week = d3.timeWeek.floor(date);\n        var x = xScale(dayOfWeek);\n        var y = yScale(week) + height + 2 * dayHeight;\n    \n        if (shouldSelectedWeekCurve &&\n          week.getTime() === this.props.selectedWeek.getTime()) {\n          var offset = Math.abs(3 - dayOfWeek);\n          y = height - 2 * dayHeight - 0.5 * offset * dayHeight;\n        }\n        y += topPadding;\n    \n        return {x, y, date};\n    }\n\n    render() {\n        return (\n\n               <g ref='container' />\n        );\n    }\n}\n\nexport default Day;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\nimport chroma from 'chroma-js';\n\nimport {width, height, colors } from '../data/config';\n\nvar amountScale =  d3.scaleLinear().domain([0,1000]);\nvar colorScale = chroma.scale(['#53c3ac', '#f7e883', '#e85178']);\nvar simulation = d3.forceSimulation()\n    .alphaDecay(0.001)\n    .velocityDecay(0.3)\n    .force('collide', d3.forceCollide(d => d.radius + 15))\n    .force('x',d3.forceX(d => d.focusX))\n    .force('y',d3.forceY(d => d.focusY))\n    .stop();\n\nvar drag = d3.drag();\n\nclass App extends Component {\n    constructor(props){\n        super(props);\n        this.state = {};\n\n        this.forceTick = this.forceTick.bind(this);\n\n        this.dragStart = this.dragStart.bind(this);\n        this.dragExpense = this.dragExpense.bind(this);\n        this.dragEnd = this.dragEnd.bind(this);\n\n        simulation.on('tick',this.forceTick);\n        drag.on('start', this.dragStart)\n            .on('drag', this.dragExpense)\n            .on('end', this.dragEnd);\n\n    }\n\n    componentDidMount(){\n        //this.container = d3.select(this.useRef.contenedor);\n        this.container = d3.select(this.refs.container);\n        this.calculateData();\n        this.renderLinks();\n        this.renderCircles();\n\n        //start simulation every time this event will be called\n        simulation.nodes(this.props.categories).alpha(0.9).restart();\n    }\n\n    componentDidUpdate(){\n        this.calculateData();\n        this.renderLinks();\n        this.renderCircles();\n    }\n\n    calculateData(){\n        this.categories = _.map(this.props.categories, category => {\n            return Object.assign(category,{\n                focusX:width /2,\n                focusY: height /3,\n                radius:70,\n                fill: colorScale(amountScale(category.total)),\n                fill2: colorScale(amountScale(5000))\n            })\n        })\n\n    }\n\n    renderLinks(){\n        this.lines = this.container.selectAll('path')\n        .data(this.props.links);\n  \n      // exit\n        this.lines.exit().remove();\n  \n      // enter + update\n        this.lines = this.lines.enter().insert('path', 'g')\n            .attr('stroke', colors.black)\n            .attr('stroke-width', 0.5)\n            .attr('fill', 'none')\n            .merge(this.lines);\n    }\n\n    renderCircles(){\n        //update\n        this.circles = this.container.selectAll('g')\n            .data(this.categories);\n        //debugger\n        //exit\n        this.circles.exit().remove();\n        \n        //enter\n        var enter = this.circles.enter().append('g');\n        enter.append('circle')\n\n            //.attr('fill',d => amountScale(d.total))\n            .attr('stroke-width',1)\n            .attr('stroke', d => d.total ? colors.black : colors.gray)\n            .attr('fill', d => d.total ? amountScale(d.total): colors.gray);\n\n        \n        enter.append('text')\n            .attr('text-anchor','middle')\n            .attr('dy','.35em')\n            .style('font-family', 'CatMule Caps')\n            .attr('fill', colors.black);\n        \n        //enter + update selection\n        this.circles = enter.merge(this.circles);\n        this.circles.select('circle')\n            .attr('r', d => d.radius)\n            .attr('stroke', d => d.total ? colors.black : '')\n            .attr('fill', d => d.total ? d.fill: colors.gray);\n\n        this.circles.select('text')\n            .text(d => d.name);\n    }\n\n    forceTick(){\n        this.circles.attr('transform', d => 'translate('+[d.x,d.y]+')');\n        //\n        this.lines\n            .attr('transform', d => {\n                var angle = Math.atan2(d.target.y - d.source.y, d.target.x - d.source.x);\n                angle *= (180 / Math.PI);\n                return'translate(' + [d.source.x, d.source.y] + ')rotate(' + angle + ')';\n            }).attr('d', d => {\n                var direction = d.source.date.getDay() < 3 ? -1 : 1;\n                // calculate distance between source and target\n                var dist = Math.sqrt(Math.pow(d.target.x - d.source.x, 2) + Math.pow(d.target.y - d.source.y, 2));\n                return 'M0,0 Q' + [dist / 2, direction * dist / 3] + ' ' + [dist, 0];\n            });\n        //simple line depreciated\n        /*this.lines.attr('x1', d => d.source.x)\n        .attr('y1', d => d.source.y)\n        .attr('x2', d => d.target.x)\n        .attr('y2', d => d.target.y);\n        */\n    }\n    dragStart(event) {\n        simulation.alphaTarget(0.3).restart();\n        event.subject.fx = event.subject.x;\n        event.subject.fy = event.subject.y;\n    \n        //this.deleteIcon.style('display', 'block');\n      }\n    \n      dragExpense(event) {\n        event.subject.fx = event.x;\n        event.subject.fy = event.y;\n      }\n    \n      dragEnd(event) {\n        if (!event.active) simulation.alphaTarget(0);\n        event.subject.fx = null;\n        event.subject.fy = null;\n\n      } \n    render() {\n        return (\n            <g ref=\"container\"/>\n        );\n    }\n}\n\nexport default App;","import _ from 'lodash';\nimport * as d3 from 'd3';\n\nconst parseExpenses = data => (\n    _.chain(data)\n    .filter(d => d.Amount < 0)\n    .map(d => {\n        const { Description } = d;\n        const date = new Date(d['Trans Date'])\n            return{\n                Description,\n                Amount: d.Amount < 0 ? -d.Amount : d.Amount,\n                date,\n                categories: 0\n                }\n        }\n    ).groupBy(d => d3.timeWeek.floor(d.date)).value()\n\n)\n  \nexport default parseExpenses;","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport Expenses from './components/Expenses';\nimport Day from './components/Day';\nimport Categories from './components/Categories';\nimport parseExpenses from './services/parseExpenses';\nimport expensesData from './data/expenses';\n\nimport {width, height} from './data/config';\n\nimport './App.css';\n\nclass App extends Component {\n  constructor(props){\n    \n    super(props);\n\n    this.state = {\n      expenses: [],\n      categories:[{name:'Parking',expenses:[],total:0},\n                  {name:'Restaurants',expenses:[],total:0},\n                  {name:'Travels',expenses:[],total:0}\n                ],\n      selectedWeek: null,\n      daysOfWeek: null\n    };\n\n    this.prevWeek = this.prevWeek.bind(this);\n    this.nextWeek = this.nextWeek.bind(this);\n    this.editDate = this.editDate.bind(this);\n    this.linkToCategory = this.linkToCategory.bind(this);\n  }\n\n\n  componentWillMount(){\n    var expenses = parseExpenses(expensesData);\n\n    var selectedWeek = d3.max(Object.keys(expenses),d => new Date(d));\n    this.setState({expenses, selectedWeek});\n  }\n\n  prevWeek(){\n    var selectedWeek = d3.timeWeek.offset(this.state.selectedWeek,-1);\n    this.setState({selectedWeek});\n      }\n\n  nextWeek(){\n    var selectedWeek = d3.timeWeek.offset(this.state.selectedWeek,1);\n    this.setState({selectedWeek});\n  }\n\n  editDate(expense, day){\n      console.log(expense)\n      expense.date = day.date;\n      console.log(expense)\n      this.forceUpdate();\n  }\n\n  linkToCategory(expense, category){\n    if (_.includes(category.expenses, expense)){\n      category.expenses = _.without(category.expense, expense);\n      expense.categories -= 1\n    } else {\n      category.expenses.push(expense)\n      expense.categories += 1\n    }\n\n    category.total = _.sumBy(category.expenses,'Amount');\n    this.forceUpdate();\n  }\n    //add a link between the category and the expense\n\n  render(){\n    var formatweek = d3.timeFormat('%d %B %Y')(this.state.selectedWeek)\n    var links = []\n\n    _.each(this.state.categories, category => {\n      _.each(category.expenses, expense => {\n          if (d3.timeWeek.floor(expense.date).getTime() === this.state.selectedWeek.getTime()){\n            links.push({\n              source: expense,\n              target: category\n            })\n          }\n      })\n    })\n\n    var props = {\n        linkToCategory: this.linkToCategory,\n        editDate: this.editDate,\n        links: links,\n      }\n\n    var style = {\n      margin: 'auto'\n    }\n    \n    return(\n      <div className=\"App\" style={style}>\n        <h1 style={{textAlign: 'center'}}>\n          <span style={{cursor: 'pointer'}} onClick = {this.prevWeek}>←</span>\n          Week of {formatweek}\n          <span style={{cursor: 'pointer'}}  onClick = {this.nextWeek}>→</span>\n        </h1>\n        <svg width={width} height={height * 3}>\n          <Day {...props} {...this.state}/>\n          <Expenses {...props} {...this.state}/>\n          <Categories {...props} {...this.state}/>\n        </svg>\n       \n      </div>\n      )\n    };\n  }\n\n  export default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}